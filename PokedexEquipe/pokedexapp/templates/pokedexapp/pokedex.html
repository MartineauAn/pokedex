{% extends 'pokedexapp/layout/base.html' %}

{% load static %}
{% block styles %}
{% endblock styles %}

{% block content %}
     
    <div class="grid md:grid-cols-3 lg:grid-cols-3 sm:grid-rows-3 md:grid-rows-1 lg:grid-rows-1 h-full bg-[#d31f42]">
        <div class="md:col-span-2 lg:col-span-2 sm:col-grid-2 ">
            
            <div id="pokemonContainer" class=" mx-auto mt-5 w-3/4 h-full p-5 bg-[#b51737]  rounded-3xl">

                <div class="flex left mx-auto w-2/4 mt-5 rounded-xl">
                    <div id="number" class="font-extrabold px-5 py-3 bg-[#b51737] rounded-xl"></div>
                    <div id="name" class="font-extrabold w-56 px-5 py-3 text-white bg-[#000000] rounded-xl"></div>
                </div>


                <div id="pokemon" class=" mx-auto w-2/4 h-2/4 h-full mt-5 rounded-xl"></div> 
                <div id="pokemon-info" class="flex flex-row w-full h-2/4">
                    <ul id="pokemon-info-column1" class=" flex-collumn w-1/2 h-full">
                        <li id="pokemon-info-column-category">Taille</li>
                        <li  id="pokemon-info-column-content">0,7 m</li>
                        <li  id="pokemon-info-column-category">Poids</li>
                        <li  id="pokemon-info-column-content">6,9 kg</li>
                    </ul>
                    <ul id="pokemon-info-column2" class=" flex-collumn w-1/2 h-full">
                        <li id="pokemon-info-column-category">Cat√©gorie</li>
                        <li  id="pokemon-info-column-content">Graine</li>
                        <li  id="pokemon-info-column-category">Talent</li>
                        <li  id="pokemon-info-column-content">Engrais</li>
                    </ul>
    
                </div> 
            </div> 
            
            <div id="tags" class="mx-auto w-3/4 flex justify-end">

            </div> 
        </div>
        <div class="md:col-span-1 lg:col-span-1 sm:col-grid-1 grid grid-rows-9 pl-10 bg-[#b51737]">
            <div class="flex justify-center p-1 m-2 row-span-1 ">
                <input type="text" class="p-3 w-11/12" placeholder="Rechercher...">
            </div>
            <div class="overflow-auto row-span-8">
                {% for pokemon in pokemon.results %}
                    <div onclick="afficher({{forloop.counter}})" id="pokemonListItem" class="flex items-center m-2 shadow-md border-sm border-black rounded-l-full p-3 bg-[#fff] hover:bg-gradient-to-r hover:from-cyan-400 hover:to-blue-600 hover:cursor-pointer">
                        <div id="pokeballIcon"></div>  
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/" width="80" height="80" alt={{ pokemon }}>
                        <div class="flex justify-start ml-2 font-bold">
                            
                            #{% if forloop.counter < 10 %}00{% elif forloop.counter < 100 %}0{% endif %}{{ forloop.counter }} - {{ pokemon.name }}.png
                        </div>   
                    </div>
                {% endfor %}
            </div>  
        </div>
    </div>

{% endblock content %}

{% block scripts %}
    <script src="./static/pokedexapp/three.js"></script>
    <script src="./static/pokedexapp/orbitControls.js"></script>
    <script src="./static/pokedexapp/gtlfLoader.js"></script>
    <script src="./static/pokedexapp/pokemon.js"></script>
    <script>

        afficher(1);
        function afficher(numero){
            var httpRequest = new XMLHttpRequest()
            httpRequest.open("GET","https://pokeapi.co/api/v2/pokemon/" + numero);
            
            httpRequest.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    const pokemon = JSON.parse(this.response)
                    console.log(JSON.parse(this.response))
                    console.log(pokemon)
                    document.querySelector("#name").innerHTML = String(pokemon.name).toUpperCase()
                    document.querySelector("#number").innerHTML = (pokemon.id < 10 ? "00" : pokemon.id < 100 ? "0" : "") + pokemon.id
                    document.querySelector("#tags").innerHTML = pokemon.forms[0].name+".png"
                    
                }
            }
            httpRequest.send();
            
        }



    </script>
{% endblock scripts %}